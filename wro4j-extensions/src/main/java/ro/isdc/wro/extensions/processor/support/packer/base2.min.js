var base2={name:"base2",version:"1.1 (alpha1)",exports:"Base,Package,Abstract,Module,Enumerable,Map,Collection,RegGrp,Undefined,Null,This,True,False,assignID,detect,global",namespace:""};new function(_no_shrink_){function detect(){var a=NaN,b=!0;if(global.navigator){var c=/MSIE[\d.]+/g,d=document.createElement("span"),e=document.createElement("input"),f=d.style,g=navigator.userAgent.replace(/([a-z])[\s\/](\d)/gi,"$1$2");b&=navigator.javaEnabled(),a||(g=g.replace(c,"")),/MSIE/.test(g)&&(g=g.match(c)[0]+";"+g.replace(c,"").replace(/user\-agent.*$/i,"")),g=g.replace(/\.NET CLR[\d\.]*/g,""),/Chrome/.test(g)?g=g.replace(/Safari[\d.]*/gi,""):/Gecko/.test(g)&&(g=g.replace(/Gecko/g,"Gecko/").replace(/rv:/,"Gecko")),/^CSS/.test(document.compatMode)||(g+=";QuirksMode"),base2.userAgent=g.replace(/like \w+/gi,"")+";"+navigator.platform}var h={};detect=function(c){var g=c.indexOf("!")==0;g&&(c=c.slice(1));if(h[c]==null){var i=!1,j=c;if(j.indexOf("(")==0){base2.dom&&(j=j.replace(/(hasFeature)/,"document.implementation.$1").replace(/\bstyle\.(\w+)/g,function(a,b){f[b]||(b=base2.dom.CSSStyleDeclaration.getPropertyName(b));return"style."+b}).replace(/^\((\w+\.[\w\.]+)\)$/,function(b,c){c=c.split(".");var d=c.pop(),e=c.join(".");return"("+(a<5.6?e+"."+d+"!==undefined":"'"+d+"' in "+e)+")"}));try{i=(new Function("global,element,input,style,jscript,java","return !!"+j))(global,d,e,f,a,b?global.java:null)}catch(k){}}else i=(new RegExp("("+j+")","i")).test(base2.userAgent);h[c]=i}return!!(g^h[c])},detect.MSIE=!!a,detect.MSIE5=a<5.6;return detect(arguments[0])}function unbind(a){return function(b){return a.apply(b,_slice.call(arguments,1))}}function partial(a){var b=_slice.call(arguments,1);return function(){var c=b.concat(),d=0,e=0;while(d<b.length&&e<arguments.length)c[d]===undefined&&(c[d]=arguments[e++]),d++;while(e<arguments.length)c[d++]=arguments[e++];if(Array2.contains(c,undefined)){c.unshift(a);return partial.apply(null,c)}return a.apply(this,c)}}function not(a){return function(){return!a.apply(this,arguments)}}function flip(a){return function(){return a.apply(this,Array2.swap(arguments,0,1))}}function delegate(a,b){return function(){var c=_slice.call(arguments);c.unshift(this);return a.apply(b,c)}}function compose(){var a=_slice.call(arguments);return function(){var b=a.length,c=a[--b].apply(this,arguments);while(b--)c=a[b].call(this,c);return c}}function bind(a,b){var c=typeof a!="function";if(arguments.length>2){var d=_slice.call(arguments,2);return function(){return(c?b[a]:a).apply(b,d.concat.apply(d,arguments))}}return function(){return(c?b[a]:a).apply(b,arguments)}}function K(a){return function(){return a}}function II(a,b){return b}function I(a){return a}function rescape(a){return(a+"").replace(_RESCAPE,"\\$1")}function match(a,b){return(a+"").match(b)||[]}function format(a){var b=arguments,c=new RegExp("%([1-"+(arguments.length-1)+"])","g");return(a+"").replace(c,function(a,c){return b[c]})}function csv(a){return a?(a+"").split(/\s*,\s*/):[]}function trim(a){return String(a).replace(_LTRIM,"").replace(_RTRIM,"")}function _createObject2(a,b,c,d){var e=Module.extend(),f=e.toString().slice(1,-1);forEach.csv(c,function(b){e[b]=unbind(a.prototype[b]),e.namespace+=format("var %1=%2.%1;",b,f)}),forEach(_slice.call(arguments,3),e.implement,e);var g=function(){return e(this.constructor==e?b.apply(null,arguments):arguments[0])};g.prototype=e.prototype;for(var h in e){var i=a[h];i&&h!="prototype"&&h!="toString"&&i!=Function.prototype[h]&&(e[h]=i,delete e.prototype[h]),g[h]=e[h]}g.ancestor=Object,delete g.extend,g.namespace=g.namespace.replace(/(var (\w+)=)[^,;]+,([^\)]+)\)/g,"$1$3.$2");return g}function typeOf(a){var b=typeof a;switch(b){case"object":return a==null?"null":typeof a.constructor!="function"?_MSIE_NATIVE_FUNCTION.test(a)?"function":b:_toString.call(a)=="[object Date]"?b:typeof a.constructor.prototype.valueOf();case"function":return typeof a.call=="function"?b:"object";default:return b}}function instanceOf(a,b){if(typeof b!="function")throw new TypeError("Invalid 'instanceOf' operand.");if(a==null)return!1;if(a.constructor==b)return!0;if(b.ancestorOf)return b.ancestorOf(a.constructor);if(a instanceof b)return!0;if(Base.ancestorOf==b.ancestorOf)return!1;if(Base.ancestorOf==a.constructor.ancestorOf)return b==Object;switch(b){case Array:return _toString.call(a)=="[object Array]";case Date:return _toString.call(a)=="[object Date]";case RegExp:return _toString.call(a)=="[object RegExp]";case Function:return typeOf(a)=="function";case String:case Number:case Boolean:return typeOf(a)==typeof b.prototype.valueOf();case Object:return!0}return!1}function _Function_forEach(a,b,c,d){var e=function(){this.i=1};e.prototype={i:1};var f=0;for(var g in new e)f++;_Function_forEach=f>1?function(a,b,c,d){var e={};for(var f in b)!e[f]&&a.prototype[f]===undefined&&(e[f]=!0,c.call(d,b[f],f,b))}:function(a,b,c,d){for(var e in b)typeof a.prototype[e]=="undefined"&&c.call(d,b[e],e,b)},_Function_forEach(a,b,c,d)}function _Array_forEach(a,b,c){a==null&&(a=global);var d=a.length||0,e;if(typeof a=="string")for(e=0;e<d;e++)b.call(c,a.charAt(e),e,a);else for(e=0;e<d;e++)e in a&&b.call(c,a[e],e,a)}function forEach(a,b,c,d){if(a!=null){if(!d)if(typeof a=="function"&&a.call)d=Function;else{if(typeof a.forEach=="function"&&a.forEach!=forEach){a.forEach(b,c);return}if(typeof a.length=="number"){_Array_forEach(a,b,c);return}}_Function_forEach(d||Object,a,b,c)}}function _override(a,b,c){function f(){var a=this.base;this.base=e?e[b]:d;var f=c.apply(this,arguments);this.base=a;return f}var d=a[b],e=base2.__prototyping;e&&d!=e[b]&&(e=null),f.method=c,f.ancestor=d,f.toString=K(c+"");return f}function _ancestorOf(a,b){while(b){if(!b.ancestor)return!1;b=b.ancestor;if(b==a)return!0}return!1}function extend(a,b){if(a&&b){var c=base2.__prototyping;if(arguments.length>2){var d=b;b={},b[d]=arguments[2],c=!0}var e=global[typeof b=="function"?"Function":"Object"].prototype;if(c){var f=_HIDDEN.length,d;while(d=_HIDDEN[--f]){var g=b[d];g!=e[d]&&(_BASE.test(g)?a[d]=_override(a,d,g):a[d]=g)}}for(d in b)if(typeof e[d]=="undefined"){g=b[d];if(d.indexOf("@")==0)detect(d.slice(1))&&extend(a,g);else if(g!=_IGNORE){var h=a[d];h&&typeof g=="function"?g!=h&&(_BASE.test(g)?a[d]=_override(a,d,g):(g.ancestor=h,a[d]=g)):a[d]=g}}}return a}function _dummy(){}function pcopy(a){_dummy.prototype=a;return new _dummy}function copy(a){var b={};for(var c in a)b[c]=a[c];return b}function assertType(a,b,c){if(b&&(typeof b=="function"?!instanceOf(a,b):typeOf(a)!=b))throw new TypeError(c||"Invalid type.")}function assertArity(a,b,c){b==null&&(b=a.callee.length);if(a.length<b)throw new SyntaxError(c||"Not enough arguments.")}function assert(a,b,c){if(!a)throw new(c||Error)(b||"Assertion failed.")}function _createModuleMethod(a,b){return function(){var c=_slice.call(arguments);c.unshift(this);return a[b].apply(a,c)}}function _createStaticModuleMethod(a,b){return function(){return a[b].apply(a,arguments)}}function _extendModule(a,b){var c=a.prototype,d=a.toString().slice(1,-1);for(var e in b){var f=b[e],g="";e.indexOf("@")==0?detect(e.slice(1))&&_extendModule(a,f):c[e]||(e==e.toUpperCase()?g="var "+e+"="+d+"."+e+";":typeof f=="function"&&f.call&&(g="var "+e+"=base2.lang.bind('"+e+"',"+d+");",c[e]=_createModuleMethod(a,e),c[e]._module=a),a.namespace.indexOf(g)==-1&&(a.namespace+=g))}}function assignID(a,b){b||(b=a.nodeType==1?"uniqueID":"base2ID"),a[b]||(a[b]="b2_"+_counter++);return a[b]}var Undefined=K(),Null=K(null),True=K(!0),False=K(!1),This=function(){return this},global=This(),base2=global.base2,_IGNORE=K(),_FORMAT=/%([1-9])/g,_LTRIM=/^\s\s*/,_RTRIM=/\s\s*$/,_RESCAPE=/([\/()[\]{}|*+-.,^$?\\])/g,_BASE=/try/.test(detect)?/\bbase\b/:/.*/,_HIDDEN=["constructor","toString"],_MSIE_NATIVE_FUNCTION=detect("(jscript)")?new RegExp("^"+rescape(isNaN).replace(/isNaN/,"\\w+")+"$"):{test:False},_counter=1,_slice=Array.prototype.slice;_Function_forEach();var _subclass=function(a,b){function e(){if(!base2.__prototyping)if(this.constructor==e||this.__constructing)this.__constructing=!0,d.apply(this,arguments),delete this.__constructing;else return extend(arguments[0],c);return this}base2.__prototyping=this.prototype;var c=new this;a&&extend(c,a),c.base=function(){},delete base2.__prototyping;var d=c.constructor;c.constructor=e;for(var f in Base)e[f]=this[f];b&&extend(e,b),e.ancestor=this,e.ancestorOf=Base.ancestorOf,e.base=c.base,e.prototype=c,e.init&&e.init(),e["#implements"]=[],e["#implemented_by"]=[];return e},Base=_subclass.call(Object,{constructor:function(){arguments.length>0&&this.extend(arguments[0])},extend:delegate(extend),toString:function(){return this.constructor.toString==Function.prototype.toString?"[object base2.Base]":"[object "+String2.slice(this.constructor,1,-1)+"]"}},Base={ancestorOf:function(a){return _ancestorOf(this,a)},extend:_subclass,forEach:function(a,b,c){_Function_forEach(this,a,b,c)},implement:function(a){typeof a=="function"&&(_ancestorOf(Base,a)&&(this["#implements"].push(a),a["#implemented_by"].push(this)),a=a.prototype),extend(this.prototype,a);return this}}),Package=Base.extend({constructor:function(a,b){function m(a){a=a.split(".");var b=base2,c=0;while(b&&a[c]!=null)b=b[a[c++]];return b}var c=this;c.extend(b),c.name&&c.name!="base2"&&(b.parent===undefined&&(c.parent=base2),c.parent&&c.parent.addName(c.name,c),c.namespace=format("var %1=%2;",c.name,String2.slice(c,1,-1)));if(a){var d=base2.js?base2.js.namespace:"",e="var base2=(function(){return this.base2})(),_private=base2.toString;"+base2.namespace+d,f=csv(c.imports),g;for(var h=0;g=f[h];h++){var i=m(g)||m("js."+g);if(!i)throw new ReferenceError(format("Object not found: '%1'.",g));e+=i.namespace}a.init=function(){c.init&&c.init()},a.imports=e+lang.namespace+"this.init();",e="";var j=csv(c.exports);for(var h=0;g=j[h];h++){var k=c.name+"."+g;c.namespace+="var "+g+"="+k+";",e+="if(!"+k+")"+k+"="+g+";"}a.exports=e+"this._label_"+c.name+"();";var l=String2.slice(c,1,-1);a["_label_"+c.name]=function(){for(var a in c){var b=c[a];b&&b.ancestorOf==Base.ancestorOf&&a!="constructor"&&(b.toString=K("["+l+"."+a+"]"))}}}},exports:"",imports:"",name:"",namespace:"",parent:null,addName:function(a,b){this[a]||(this[a]=b,this.exports+=","+a,this.namespace+=format("var %1=%2.%1;",a,this.name),b&&b.ancestorOf==Base.ancestorOf&&a!="constructor"&&(b.toString=K("["+String2.slice(this,1,-1)+"."+a+"]")))},addPackage:function(a){this.addName(a,new Package(null,{name:a,parent:this}))},toString:function(){return format("[%1]",this.parent?String2.slice(this.parent,1,-1)+"."+this.name:this.name)}}),Abstract=Base.extend({constructor:function(){throw new TypeError("Abstract class cannot be instantiated.")}}),_moduleCount=0,Module=Abstract.extend(null,{namespace:"",extend:function(a,b){var c=this.base(),d=_moduleCount++;c.namespace="",c.partial=this.partial,c.toString=K("[base2.Module["+d+"]]"),Module[d]=c,c.implement(this),a&&c.implement(a),b&&(extend(c,b),c.init&&c.init());return c},forEach:function(a,b){_Function_forEach(Module,this.prototype,function(c,d){typeOf(c)=="function"&&a.call(b,this[d],d,this)},this)},implement:function(a){var b=this,c=b.toString().slice(1,-1);if(typeof a=="function"){_ancestorOf(a,b)||this.base(a);if(_ancestorOf(Module,a)){for(var d in a)if(typeof b[d]=="undefined"){var e=a[d];typeof e=="function"&&e.call&&a.prototype[d]&&(e=_createStaticModuleMethod(a,d)),b[d]=e}b.namespace+=a.namespace.replace(/base2\.Module\[\d+\]/g,c)}}else extend(b,a),_extendModule(b,a);return b},partial:function(){var a=Module.extend(),b=a.toString().slice(1,-1);a.namespace=this.namespace.replace(/(\w+)=b[^\)]+\)/g,"$1="+b+".$1"),this.forEach(function(b,c){a[c]=partial(bind(b,a))});return a}});Module.prototype.base=Module.prototype.extend=_IGNORE;var Enumerable=Module.extend({every:function(a,b,c){var d=!0;try{forEach(a,function(e,f){d=b.call(c,e,f,a);if(!d)throw StopIteration})}catch(e){if(e!=StopIteration)throw e}return!!d},filter:function(a,b,c){var d=0;return this.reduce(a,function(e,f,g){b.call(c,f,g,a)&&(e[d++]=f);return e},[])},invoke:function(a,b){var c=_slice.call(arguments,2);return this.map(a,typeof b=="function"?function(a){return a==null?undefined:b.apply(a,c)}:function(a){return a==null?undefined:a[b].apply(a,c)})},map:function(a,b,c){var d=[],e=0;forEach(a,function(f,g){d[e++]=b.call(c,f,g,a)});return d},pluck:function(a,b){return this.map(a,function(a){return a==null?undefined:a[b]})},reduce:function(a,b,c,d){var e=arguments.length>2;forEach(a,function(f,g){e?c=b.call(d,c,f,g,a):(c=f,e=!0)});return c},some:function(a,b,c){return!this.every(a,not(b),c)}}),_HASH="#",Map=Base.extend({constructor:function(a){a&&this.merge(a)},clear:function(){for(var a in this)a.indexOf(_HASH)==0&&delete this[a]},copy:function(){base2.__prototyping=!0;var a=new this.constructor;delete base2.__prototyping;for(var b in this)this[b]!==a[b]&&(a[b]=this[b]);return a},forEach:function(a,b){for(var c in this)c.indexOf(_HASH)==0&&a.call(b,this[c],c.slice(1),this)},get:function(a){return this[_HASH+a]},getKeys:function(){return this.map(II)},getValues:function(){return this.map(I)},has:function(a){a=_HASH+a;return a in this},merge:function(a){var b=flip(this.put);forEach(arguments,function(a){forEach(a,b,this)},this);return this},put:function(a,b){this[_HASH+a]=b;return b},remove:function(a){delete this[_HASH+a]},size:function(){var a=0;for(var b in this)b.indexOf(_HASH)==0&&a++;return a},union:function(a){return this.merge.apply(this.copy(),arguments)}});Map.implement(Enumerable),Map.prototype.filter=function(a,b){return this.reduce(function(c,d,e){a.call(b,d,e,this)||c.remove(e);return c},this.copy(),this)};var _KEYS="~",Collection=Map.extend({constructor:function(a){this[_KEYS]=new Array2,this.base(a)},add:function(a,b){if(this.has(a))throw"Duplicate key '"+a+"'.";return this.put.apply(this,arguments)},clear:function(){this.base(),this[_KEYS].length=0},copy:function(){var a=this.base();a[_KEYS]=this[_KEYS].copy();return a},forEach:function(a,b){var c=this[_KEYS].concat(),d=c.length;for(var e=0;e<d;e++)a.call(b,this[_HASH+c[e]],c[e],this)},getAt:function(a){var b=this[_KEYS].item(a);return b===undefined?undefined:this[_HASH+b]},getKeys:function(){return this[_KEYS].copy()},indexOf:function(a){return this[_KEYS].indexOf(String(a))},insertAt:function(a,b,c){if(this[_KEYS].item(a)==null)throw"Index out of bounds.";if(this.has(b))throw"Duplicate key '"+b+"'.";this[_KEYS].insertAt(a,String(b)),this[_HASH+b]=null;return this.put.apply(this,_slice.call(arguments,1))},item:function(a){return this[typeof a=="number"?"getAt":"get"](a)},put:function(a,b){var c=this.constructor;c.Item&&!instanceOf(b,c.Item)&&(b=c.create.apply(c,arguments)),this.has(a)||this[_KEYS].push(String(a)),this[_HASH+a]=b;return b},putAt:function(a,b){arguments[0]=this[_KEYS].item(a);if(arguments[0]==null)throw"Index out of bounds.";return this.put.apply(this,arguments)},remove:function(a){this.has(a)&&(this[_KEYS].remove(String(a)),delete this[_HASH+a])},removeAt:function(a){var b=this[_KEYS].item(a);b!==undefined&&(this[_KEYS].removeAt(a),delete this[_HASH+b])},reverse:function(){this[_KEYS].reverse();return this},size:function(){return this[_KEYS].length},slice:function(a,b){var c=this.copy();if(arguments.length>0){var d=this[_KEYS],e=d;c[_KEYS]=Array2(_slice.apply(d,arguments)),c[_KEYS].length&&(e=e.slice(0,a),arguments.length>1&&(e=e.concat(d.slice(b))));for(var f=0;f<e.length;f++)delete c[_HASH+e[f]]}return c},sort:function(a){a?this[_KEYS].sort(bind(function(b,c){return a(this[_HASH+b],this[_HASH+c],b,c)},this)):this[_KEYS].sort();return this},toString:function(){return"("+(this[_KEYS]||"")+")"}},{Item:null,create:function(a,b){return this.Item?new this.Item(a,b):b},extend:function(a,b){var c=this.base(a);c.create=this.create,b&&extend(c,b),c.Item?typeof c.Item!="function"&&(c.Item=(this.Item||Base).extend(c.Item)):c.Item=this.Item,c.init&&c.init();return c}}),_RG_BACK_REF=/\\(\d+)/g,_RG_ESCAPE_CHARS=/\\./g,_RG_ESCAPE_BRACKETS=/\(\?[:=!]|\[[^\]]+\]/g,_RG_BRACKETS=/\(/g,_RG_LOOKUP=/\$(\d+)/,_RG_LOOKUP_SIMPLE=/^\$\d+$/,RegGrp=Collection.extend({constructor:function(a,b){this.base(a),this.ignoreCase=!!b},ignoreCase:!1,exec:function(a,b){a+="";var c=this,d=this[_KEYS];if(!d.length)return a;b==RegGrp.IGNORE&&(b=0);return a.replace(new RegExp(this,this.ignoreCase?"gi":"g"),function(a){var e,f=1,g=0;while(e=c[_HASH+d[g++]]){var h=f+e.length+1;if(arguments[f]){var i=b==null?e.replacement:b;switch(typeof i){case"function":return i.apply(c,_slice.call(arguments,f,h));case"number":return arguments[f+i];default:return i}}f=h}return a})},insertAt:function(a,b,c){instanceOf(b,RegExp)&&(arguments[1]=b.source);return this.base.apply(this,arguments)},test:function(a){return this.exec(a)!=a},toString:function(){var a=1;return"("+this.map(function(b){var c=(b+"").replace(_RG_BACK_REF,function(b,c){return"\\"+(a+Number(c))});a+=b.length+1;return c}).join(")|(")+")"}},{IGNORE:"$0",init:function(){forEach("add,get,has,put,remove".split(","),function(a){this[a]=_override(this,a,function(a){instanceOf(a,RegExp)&&(arguments[0]=a.source);return this.base.apply(this,arguments)})},this.prototype)},Item:{constructor:function(a,b){b==null?b=RegGrp.IGNORE:b.replacement!=null?b=b.replacement:typeof b!="function"&&(b=String(b));if(typeof b=="string"&&_RG_LOOKUP.test(b))if(_RG_LOOKUP_SIMPLE.test(b))b=parseInt(b.slice(1),10);else{var c='"';b=b.replace(/\\/g,"\\\\").replace(/"/g,"\\x22").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\$(\d+)/g,c+"+(arguments[$1]||"+c+c+")+"+c).replace(/(['"])\1\+(.*)\+\1\1$/,"$1"),b=new Function("return "+c+b+c)}this.length=RegGrp.count(a),this.replacement=b,this.toString=K(a+"")},disabled:!1,length:0,replacement:""},count:function(a){a=(a+"").replace(_RG_ESCAPE_CHARS,"").replace(_RG_ESCAPE_BRACKETS,"");return match(a,_RG_BRACKETS).length}}),lang={name:"lang",version:base2.version,exports:"assert,assertArity,assertType,bind,copy,extend,forEach,format,instanceOf,match,pcopy,rescape,trim,typeOf",namespace:""};typeof StopIteration=="undefined"&&(StopIteration=new Error("StopIteration")),forEach.csv=function(a,b,c){forEach(csv(a),b,c)},forEach.detect=function(a,b,c){var d=function(e,f){f.indexOf("@")==0?detect(f.slice(1))&&forEach(e,d):b.call(c,e,f,a)};forEach(a,d)};var _toString=Object.prototype.toString,js={name:"js",version:base2.version,exports:"Array2,Date2,Function2,String2",namespace:"",bind:function(a){var b=global;global=a,forEach.csv(this.exports,function(b){var c=b.slice(0,-1);extend(a[c],this[b]),this[b](a[c].prototype)},this),global=b;return a}};(new Date).getYear()>1900&&(Date.prototype.getYear=function(){return this.getFullYear()-1900},Date.prototype.setYear=function(a){return this.setFullYear(a+1900)});var _testDate=new Date(Date.UTC(2006,1,20));_testDate.setUTCDate(15),_testDate.getUTCHours()!=0&&forEach.csv("FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds",function(a){extend(Date.prototype,"setUTC"+a,function(){var a=this.base.apply(this,arguments);a>=57722401e3&&(a-=36e5,this.setTime(a));return a})}),Function.prototype.prototype={},"".replace(/^/,K("$$"))=="$"&&extend(String.prototype,"replace",function(a,b){if(typeof b=="function"){var c=b;b=function(){return String(c.apply(null,arguments)).split("$").join("$$")}}return this.base(a,b)});var Array2=_createObject2(Array,Array,"concat,join,pop,push,reverse,shift,slice,sort,splice,unshift",Enumerable,{batch:function(a,b,c,d,e){var f=0,g=a.length,h=function(){var i=Date2.now(),j=i,k=0;while(f<g&&i-j<c){b.call(e,a[f],f++,a);if(k++<5||k%50==0)i=Date2.now()}f<g?setTimeout(h,10):d&&d.call(e)};setTimeout(h,1)},combine:function(a,b){b||(b=a);return Array2.reduce(a,function(a,c,d){a[c]=b[d];return a},{})},contains:function(a,b){return Array2.indexOf(a,b)!=-1},copy:function(a){var b=_slice.call(a);b.swap||Array2(b);return b},flatten:function(a){var b=0,c=function(a,d){Array2.like(d)?Array2.reduce(d,c,a):a[b++]=d;return a};return Array2.reduce(a,c,[])},forEach:_Array_forEach,indexOf:function(a,b,c){var d=a.length;c==null?c=0:c<0&&(c=Math.max(0,d+c));for(var e=c;e<d;e++)if(a[e]===b)return e;return-1},insertAt:function(a,b,c){Array2.splice(a,b,0,c)},item:function(a,b){b<0&&(b+=a.length);return a[b]},lastIndexOf:function(a,b,c){var d=a.length;c==null?c=d-1:c<0&&(c=Math.max(0,d+c));for(var e=c;e>=0;e--)if(a[e]===b)return e;return-1},map:function(a,b,c){var d=[];_Array_forEach(a,function(e,f){d[f]=b.call(c,e,f,a)});return d},remove:function(a,b){var c=Array2.indexOf(a,b);c!=-1&&Array2.removeAt(a,c)},removeAt:function(a,b){Array2.splice(a,b,1)},swap:function(a,b,c){b<0&&(b+=a.length),c<0&&(c+=a.length);var d=a[b];a[b]=a[c],a[c]=d;return a}});Array2.forEach=_Array_forEach,Array2.reduce=Enumerable.reduce,Array2.like=function(a){return typeOf(a)=="object"&&typeof a.length=="number"},Enumerable["#implemented_by"].pop(),Enumerable["#implemented_by"].push(Array2);var _DATE_PATTERN=/^((-\d+|\d{4,})(-(\d{2})(-(\d{2}))?)?)?T((\d{2})(:(\d{2})(:(\d{2})(\.(\d{1,3})(\d)?\d*)?)?)?)?(([+-])(\d{2})(:(\d{2}))?|Z)?$/,_DATE_PARTS={FullYear:2,Month:4,Date:6,Hours:8,Minutes:10,Seconds:12,Milliseconds:14},_TIMEZONE_PARTS={Hectomicroseconds:15,UTC:16,Sign:17,Hours:18,Minutes:20},Date2=_createObject2(Date,function(a,b,c,d,e,f,g){switch(arguments.length){case 0:return new Date;case 1:return typeof a=="string"?new Date(Date2.parse(a)):new Date(a.valueOf());default:return new Date(a,b,arguments.length==2?1:c,d||0,e||0,f||0,g||0)}},"",{toISOString:function(a){var b="####-##-##T##:##:##.###";for(var c in _DATE_PARTS)b=b.replace(/#+/,function(b){var d=a["getUTC"+c]();c=="Month"&&d++;return("000"+d).slice(-b.length)});return b+"Z"}});delete Date2.forEach,Date2.now=function(){return(new Date).valueOf()},Date2.parse=function(a,b){arguments.length>1&&assertType(b,"number","Default date should be of type 'number'.");var c=match(a,_DATE_PATTERN);if(c.length){var d=c[_DATE_PARTS.Month];d&&(c[_DATE_PARTS.Month]=String(d-1)),c[_TIMEZONE_PARTS.Hectomicroseconds]>=5&&c[_DATE_PARTS.Milliseconds]++;var e=c[_TIMEZONE_PARTS.UTC]||c[_TIMEZONE_PARTS.Hours]?"UTC":"",f=new Date(b||0);c[_DATE_PARTS.Date]&&f["set"+e+"Date"](14);for(var g in _DATE_PARTS){var h=c[_DATE_PARTS[g]];if(h){f["set"+e+g](h);if(f["get"+e+g]()!=c[_DATE_PARTS[g]])return NaN}}if(c[_TIMEZONE_PARTS.Hours]){var i=Number(c[_TIMEZONE_PARTS.Sign]+c[_TIMEZONE_PARTS.Hours]),j=Number(c[_TIMEZONE_PARTS.Sign]+(c[_TIMEZONE_PARTS.Minutes]||0));f.setUTCMinutes(f.getUTCMinutes()+i*60+j)}return f.valueOf()}return Date.parse(a)};var String2=_createObject2(String,function(a){return new String(arguments.length==0?"":a)},"charAt,charCodeAt,concat,indexOf,lastIndexOf,match,replace,search,slice,split,substr,substring,toLowerCase,toUpperCase",{csv:csv,format:format,rescape:rescape,trim:trim});delete String2.forEach;var Function2=_createObject2(Function,Function,"",{I:I,II:II,K:K,bind:bind,compose:compose,delegate:delegate,flip:flip,not:not,partial:partial,unbind:unbind});base2=global.base2=new Package(this,base2),base2.toString=K("[base2]");var exports=this.exports;lang=new Package(this,lang),exports+=this.exports,js=new Package(this,js),eval(exports+this.exports),lang.extend=extend,base2.JavaScript=pcopy(js),base2.JavaScript.namespace+="var JavaScript=js;"}